# include "mfile2"

# define AWD SNAME|SOREG|SCON|STARNM|STARREG|SAREG
# define LWD SNAME|SOREG|SCON|SAREG

struct optab  table[] = {

ASSIGN, INAREG|FOREFF|FORCC,
 SAREG, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
 SZERO, TANY,
  0, RLEFT|RRIGHT|RESCC,
  "          slr   AL,AL   clr1\n",

ASSIGN, FOREFF,
 SOREG, TCHAR|TUCHAR,
 SZERO, TANY,
  0, RLEFT,
  "          mvi  AL,0  clr2\n",

ASSIGN, INAREG|FOREFF,
 SOREG, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
 SAREG, TANY,
  0, RRIGHT,
  "          st    AR,AL mov1\n",
#if 0
ASSIGN, INAREG|FOREFF,
 STARNM, TPOINT,
 SAREG, TANY,
  NAREG, RRIGHT,
  "          l    A1,AL  mov1r\n          st   AR,0(,A1) mov1r1\n",

ASSIGN, INAREG|FOREFF,
 STARNM, TINT|TUNSIGNED|TLONG|TULONG,
 SAREG, TANY,
  NAREG, RRIGHT,
  "          l    A1,AL  movrn\n          st   AR,0(,A1) movrn1\n",
#endif
ASSIGN, INAREG|FOREFF,
 STARNM, TCHAR|TUCHAR,
 SAREG, TANY,
  NAREG, RRIGHT,
  "          l    A1,AL  mov1b\n          stc  AR,0(,A1) mov1b1\n",
#if 0
ASSIGN, INAREG|INTAREG|FOREFF,
 STARREG, TCHAR|TUCHAR,
 SAREG, TANY,
  NAREG, RRIGHT,
  "AL          l    A1,AL  mov1br\n          stc  AR,0(,A1) mov1br1\n",
#endif
ASSIGN, INAREG|FOREFF,
 SOREG, TSHORT|TUSHORT,
 SAREG, TPOINT|TINT|TUNSIGNED|TCHAR|TUCHAR|TLONG|TULONG,
  0, RRIGHT,
  "          sth   AR,AL mov1s\n",

ASSIGN, INAREG|FOREFF,
 SOREG, TCHAR|TUCHAR,
 SAREG, TPOINT|TINT|TUNSIGNED|TCHAR|TUCHAR,
  0, RLEFT|RRIGHT,
  "          stc   AR,AL mov1c\n",

ASSIGN, INAREG|FOREFF,
 SNAME, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
 SAREG, TPOINT|TINT|TUNSIGNED|TCHAR|TUCHAR,
  NAREG, RRIGHT,
  "   l    A1,AL   mov1n\n   st    AR,0(,A1) mov1nb\n",

ASSIGN, INAREG|FOREFF,
 SNAME, TSHORT|TUSHORT,
 SAREG, TANY,
  NAREG, RRIGHT,
  "   l    A1,AL   mov1sn\n   sth   AR,0(,A1) mov1snb\n",

ASSIGN, INAREG|FOREFF,
 SAREG | STAREG, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
 SOREG | SCON, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
  0, RLEFT|RRIGHT,
  "          l    AL,AR   l1\n",

ASSIGN, INAREG|FOREFF,
 SAREG | STAREG, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
 SNAME, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
  0, RLEFT|RRIGHT,
  "          l    AL,AR   l1n\n          l    AL,0(,AL)   l1na\n",

ASSIGN, INAREG|FOREFF,
 SAREG | STAREG, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
 SAREG | STAREG, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
  0, RLEFT|RRIGHT,
  "          lr   AL,AR   lr1\n",

ASSIGN, INAREG|FOREFF,
 STARNM, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
 SAREG, TINT|TUNSIGNED|TLONG|TULONG,
  NAREG, RLEFT,
  "    l   A1,AL   mov6\n   st   AR,0(,A1)   mov6\n",

ASSIGN, INTAREG|INAREG|FOREFF,
 STARNM, TCHAR|TUCHAR,
 SCON, TANY,
  NAREG, RESC1,
  "    l   A1,AL   mov6c\n   mvi  0(A1),ZG   mov6c1\n",

ASSIGN, INAREG|INTAREG|FOREFF,
 STARREG|STARNM, TSHORT|TUSHORT,
 SAREG|STAREG, TANY,
  NAREG, RRIGHT,
  " l A1,AL  mov7s1\n     sth  AR,0(,A1)   mov7s2\n",

ASSIGN, INAREG|INTAREG|FOREFF,
 SOREG, TCHAR|TUCHAR,
 SAREG, TINT|TUNSIGNED|TLONG|TULONG|TCHAR|TUCHAR,
  0, RRIGHT,
  "   stc  AR,AL   mov8a\n",

ASSIGN, INAREG|INTAREG|FOREFF,
 SNAME, TCHAR|TUCHAR,
 SAREG, TINT|TUNSIGNED|TLONG|TULONG|TCHAR|TUCHAR,
  NAREG, RRIGHT,
  "   l   A1,AL  mov8b1\n   stc  AR,0(,A1)   mov8b2\n",

ASSIGN, INAREG|INTAREG|FOREFF,
 SAREG, TCHAR|TUCHAR,
 SAREG, TCHAR|TUCHAR,
  0, RLEFT|RRIGHT,
  "          lr   AL,AR   mov8r\n",

ASSIGN, FOREFF,
 SOREG, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
 SICON, TINT|TUNSIGNED|TLONG|TULONG,
  0, RLEFT,
  "          mvc   ZcAL,AR   mov5\n",

ASSIGN, INAREG|FOREFF,
 SOREG, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
 SAREG, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
  0, RLEFT|RRIGHT,
  "          st    AR,AL mov1a\n",

ASSIGN, INAREG|FOREFF,
 SNAME, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
 SAREG, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
  NAREG, RLEFT|RRIGHT,
  " l A1,AL\n st AR,0(,A1) mov1an\n",

ASSIGN, INBREG|FOREFF,
 SOREG, TDOUBLE,
 SBREG, TDOUBLE,
  0, RRIGHT,
  "          std   AR,AL mov1da\n",

ASSIGN, INBREG|FOREFF,
 SNAME, TDOUBLE,
 SBREG | STBREG, TANY,
  NAREG, RLEFT,
  "   l    A1,AL  mov2da\n   std   AR,0(,A1)   mov2db\n",

ASSIGN, FOREFF,
 STARNM|STARREG, TDOUBLE,
 SOREG, TDOUBLE,
  NAREG, RLEFT,
  "   l    A1,AL  mov3da\n   mvc   0(8,A1),AR   mov3db\n",

ASSIGN, FOREFF,
 STARNM|STARREG, TANY,
 SBREG, TANY,
  NAREG, RLEFT,
  "   l    A1,AL  mov4da\n   std   AR,0(,A1)   mov4db\n",

ASSIGN, FOREFF,
 STARNM|STARREG, TFLOAT,
 SOREG, TANY,
  NAREG, RLEFT,
  "   l    A1,AL  mov5da\n   l    A1,0(,A1)   mov5db\n   mvc   0(4,A1),AR   mov5dc\n",

UNARY MUL,      INTAREG | INTBREG,
 SANY, TANY,
 SOREG, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
 NAREG,  RESC1, 
        "          l     A1,AR      umul1\n",

UNARY AND,      INAREG | INTAREG,
 SNAME, TANY,
 SANY, TANY,
 NAREG,  RESC1, 
        "          l     A1,AL      uand1\n",

OPLTYPE, FOREFF,
 SANY, TANY,
 LWD, TANY,
  0, RRIGHT,
  "",   /* this entry throws away computations which don't do anything */
#if 0
OPLTYPE, INAREG | INTAREG,
 SANY, TANY,
 SOREG | SNAME | SCON, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  0, RLEFT,
  "          l     AL,AR    mov2a\n",
#endif
#if 1
OPLTYPE, INTEMP|FOREFF,
 SANY, TANY,
 SAREG | STAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  NTEMP, RESC1,
  "          st   AR,A1    mov2t fixme\n",
#endif

OPLTYPE, INTAREG|INAREG,
 SANY, TANY,
 SOREG | SCON, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  NAREG, RESC1,
  "          l     A1,AR    mov2\n",

OPLTYPE, INTAREG|INAREG,
 SANY, TANY,
 SOREG, TCHAR|TUCHAR,
  NAREG, RESC1,
  "          slr  A1,A1   mov2c\n          ic    A1,AR    mov2c1\n",

OPLTYPE, INTAREG|INAREG,
 SANY, TANY,
 SCON, TCHAR|TUCHAR,
  NAREG, RESC1,
  "          slr  A1,A1   mov3c\n          ic    A1,AR    mov3c1\n",

OPLTYPE, INTAREG|INAREG|FOREFF,
 SANY, TANY,
 SNAME, TSHORT|TUSHORT,
  NAREG, RESC1,
  " l A1,AR\n          lh    A1,0(,A1)    mov2sn\n",

OPLTYPE, INTAREG|INAREG|FOREFF,
 SANY, TANY,
 SOREG, TSHORT|TUSHORT,
  NAREG, RESC1,
  "          lh    A1,AR    mov2s\n",

OPLTYPE, INTAREG|INAREG|FOREFF,
 SANY, TANY,
 SCON, TSHORT|TUSHORT,
  NAREG, RESC1,
  "          lh    A1,AR    mov2sc\n",

OPLTYPE, INTBREG|INBREG,
 SANY, TANY,
 SOREG, TDOUBLE,
  NBREG, RESC1,
  "          ld    A1,AR    movd2\n",
#if 1
OPLTYPE, INTBREG|INBREG,
 SANY, TANY,
 SNAME, TDOUBLE,
  NAREG|NBREG, RESC2,
  " l A1,AR  movd31\n         ld    A2,0(,A1)    movd32\n",
#endif
OPLTYPE, INTAREG|INAREG,
 SANY, TANY,
 SNAME, TINT|TUNSIGNED|TLONG|TULONG,
  NAREG, RESC1,
  "          l     A1,AR    mov2n\n          l    A1,0(,A1)   mov2na\n",

OPLTYPE, INTAREG|INAREG,
 SANY, TANY,
 SNAME, TPOINT,
  NAREG, RESC1,
  "          l     A1,AR    mov2p\n          l    A1,0(,A1)   mov2pa\n",

OPLTYPE, INTAREG|INAREG,
 SANY, TANY,
 SOREG, TCHAR,
  NAREG, RESC1,
  "          slr   A1,A1    mov22a\n          ic    A1,AR    mov22b\n",

OPLTYPE, INTAREG|INAREG,
 SANY, TANY,
 SNAME, TCHAR,
  NAREG, RESC1,
  "          l     A1,AR    mov23a\n          ic    A1,0(,A1)    mov23b\n   n   A1,=xl4'000000ff'   mov23c\n",

OPLTYPE, INTAREG|INAREG,
 SANY, TANY,
 SCON, TCHAR,
  NAREG, RESC1,
  "          slr   A1,A1    mov24a\n          ic    A1,AR    mov24b\n",

OPLTYPE, INTAREG|INAREG,
 SANY, TANY,
 SAREG | STAREG, TINT|TUNSIGNED|TPOINT|TCHAR|TLONG|TULONG,
  NAREG, RESC1,
  "          lr    A1,AR    lr2\n",

OPLTYPE, FORCC,
 SANY, TANY,
 SAREG, TINT|TUNSIGNED|TPOINT|TCHAR|TUCHAR,
  0, RESCC,
  "          ltr  AR,AR tst1\n",

OPLTYPE, FORCC,
 SANY, TANY,
 SOREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  0, RESCC,
  "          clc  ZcAR,=f'0' tst2\n",

OPLTYPE, FORCC,
 SANY, TANY,
 SOREG, TCHAR|TUCHAR,
  0, RESCC,
  "          cli  AR,x'00' tst2c\n",

OPLTYPE, FORCC,
 SANY, TANY,
 SNAME, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  NAREG, RESCC,
  "          l    A1,AR     tst3a\n          l    A1,0(,A1)   tst3b\n          ltr   A1,A1   tst3c\n",

OPLTYPE, FORARG,
 SANY, TANY,
 SCON|SOREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  0, RNULL,
  "          mvc   ZcZ-,AR    mhpi1\n",

OPLTYPE, FORARG,
 SANY, TANY,
 SAREG | STAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  0, RNULL,
  "          st    AR,Z-    mhpi2\n",
#if 0
OPLTYPE, FORARG,
 SANY, TANY,
 SOREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  0, RNULL,
  "          mvc    Z-,AR   mhpi3\n",
#endif
OPLTYPE, FORARG,
 SANY, TANY,
 SOREG, TDOUBLE,
  0, RNULL,
  "          mvc    Z8,AR   mhpi4a   fixme\n",

OPLOG, FORCC,
 SAREG | STAREG, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
 SAREG | STAREG, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
  0, RESCC,
  "          cr   AL,AR   cmp1\nZI",

OPLOG, FORCC,
 SAREG | STAREG, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
 SOREG|SCON|SAREG, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
  0, RESCC,
  "          c    AL,AR   cmp2\nZI",

OPLOG, FORCC,
 SAREG | STAREG, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
 SNAME, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
  NAREG, RESCC,
  "          l    A1,AR   cmp2na\n          l    A1,0(,A1)   cmp2nb\n          cr   AL,A1   cmp2nc\nZI",

OPLOG, FORCC,
 SAREG | STAREG, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
 SNAME|SOREG|SCON|SAREG, TSHORT|TUSHORT,
  0, RESCC,
  "          ch   AL,AR   cmp2s\nZI",

OPLOG, FORCC,
 SAREG | STAREG, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
 STARREG, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
  0, RESCC,
  "          c    AL,AR   cmp2a\nZI",

OPLOG, FORCC,
 SAREG | STAREG, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
 STARNM, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
  NAREG, RESCC,
  "          l    A1,AR   cmp2b1\n          l    A1,0(,A1)   cmp2b2\n          cr   AL,A1   cmp2b3\nZI",

OPLOG, FORCC,
 SOREG | STAREG, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
 SCON, TPOINT|TINT|TUNSIGNED|TLONG|TULONG,
  NAREG, RESCC,
  "          l    A1,AL   cmp3a\n          c   A1,AR   cmp3b\nZI",
#if 0
OPLOG, FORCC,
 AWD, TCHAR|TUCHAR,
 SCCON, TINT,    /* look for constants between -128 and 127 */
  0, RESCC,
  "          clc  AL,AR   clcc2\nZI",
#endif
OPLOG, FORCC,
 SBREG, TDOUBLE,
 SNAME | SCON, TDOUBLE,    /* look for constants between -128 and 127 */
  NAREG, RESCC,
  "          l    A1,AR   cd1a\n          cd   AL,0(,A1)   cd1b\nZI",

CCODES, INTAREG|INAREG,
        SANY,   TANY,
        SANY,   TINT|TUNSIGNED|TPOINT|TCHAR|TUCHAR|TLONG|TULONG,
                NAREG,  RESC1,
                "          la   A1,1   ccodes\nZN",

UNARY MINUS, INAREG | INTAREG,
 SAREG | STAREG, TINT|TUNSIGNED|TCHAR|TUCHAR|TLONG|TULONG,
 SANY,  TANY,
  NAREG, RLEFT,
  "  lr  A1,AL  cmpl1a\n  slr  AL,AL  cmpl1b\n  sr  AL,A1  cmpl1c\n",

UNARY MINUS, INAREG | INTAREG,
 SAREG | STAREG, TPOINT,
 SANY,  TANY,
  NAREG, RLEFT,
  "  lr  A1,AL  cmpp1a\n  slr  AL,AL  cmpp1b\n  sr  AL,A1  cmpp1c\n",

UNARY MINUS, INBREG | INTBREG,
 SBREG | STBREG, TDOUBLE,
 SANY,  TANY,
  NBREG, RLEFT,
  " sdr A1,A1\n sdr A1,AL\n ldr AL,A1 fixme negd1\n",

COMPL, INTAREG|INAREG,
 STAREG, TINT|TUNSIGNED|TLONG|TULONG,
 SANY, TANY,
  0, RLEFT,
  "          x   AL,=x'ffffffff'  compl1\n",

INCR,   INTAREG|INAREG|FOREFF,
        SOREG,    TINT|TUNSIGNED|TPOINT|TCHAR|TUCHAR,
        SANY,   TANY,
                NAREG,  RESC1,
                "   l  A1,AL  incr1\n   la  A1,1(,A1)  incr1a\n  st  A1,AL   incr1b\n",
#if 0
INCR,   INTAREG|INAREG|FOREFF,
        SNAME,    TINT|TUNSIGNED|TPOINT|TCHAR|TUCHAR,
        SANY,   TANY,
                NAREG,  RESC1,
                "   l  A1,AL  incr2\n   la  A1,1(,A1)  incr2a\n  st  A1,AL   incr2b\n",
#endif
AND, FORCC,
 SOREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SCON, TANY,
  NAREG, RESCC,
  "          l    A1,AL   and1a\n          n    A1,AR    and1b\n",

ASG MUL, INAREG,
 STAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  0, RLEFT,
  "          lr    1,AL   mulr1a\n          mr  0,AR   mulr1b\n          lr   AL,1   mulr1c\n",

ASG MUL, INAREG,
 STAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SOREG | SNAME | SCON, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  0, RLEFT,
  "          lr    1,AL   mul1a\n          m   0,AR   mul1b\n          lr   AL,1   mul1c\n",

ASG PLUS, INAREG,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TLONG,
 SONE, TANY,
  0, RLEFT|RESCC,
  "          la   AL,1(,AL)  inc1\n",

ASG PLUS, INAREG | FOREFF,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SOREG , TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  0, RLEFT,
  "          a   AL,AR     add2\n",

ASG PLUS, INAREG | FOREFF,
 SAREG, TANY,
 SOREG , TSHORT|TUSHORT,
  0, RLEFT,
  "          ah  AL,AR     add2s\n",

ASG PLUS, INBREG,
 SBREG, TDOUBLE,
 SOREG , TDOUBLE,
  0, RLEFT,
  "          ad  AL,AR     addd2\n",

ASG PLUS, INBREG,
 SBREG, TDOUBLE,
 SBREG , TDOUBLE,
  0, RLEFT,
  "          adr AL,AR     addd2r\n",

ASG MINUS, INBREG,
 SBREG, TDOUBLE,
 SOREG , TDOUBLE,
  0, RLEFT,
  "          sd  AL,AR     subd2\n",

ASG MINUS, INBREG,
 SBREG, TDOUBLE,
 SBREG , TDOUBLE,
  0, RLEFT,
  "          sdr AL,AR     subd2r\n",

ASG MINUS, INBREG,
 SBREG, TDOUBLE,
 SNAME|SCON , TDOUBLE,
  NAREG, RLEFT,
  "          l    A1,AR   subd2n1\n          sd  AL,0(,A1)     subd2n2\n",

ASG MUL, INBREG,
 SBREG, TDOUBLE,
 SOREG , TDOUBLE,
  0, RLEFT,
  "          md  AL,AR     muld2\n",

ASG MUL, INBREG,
 SBREG, TDOUBLE,
 SNAME|SCON , TDOUBLE,
  NAREG, RLEFT,
  "          l    A1,AR   muld2n1\n          md  AL,0(,A1)     muld2n2\n",

ASG MUL, INBREG,
 SBREG, TDOUBLE,
 SBREG , TDOUBLE,
  0, RLEFT,
  "          mdr AL,AR     muld2r\n",

ASG DIV, INBREG,
 SBREG, TDOUBLE,
 SOREG , TDOUBLE,
  0, RLEFT,
  "          dd  AL,AR     divd2\n",

ASG DIV, INBREG,
 SBREG, TDOUBLE,
 SBREG , TDOUBLE,
  0, RLEFT,
  "          ddr AL,AR     divd2r\n",

ASG DIV, INBREG,
 SBREG, TDOUBLE,
 SNAME|SCON , TDOUBLE,
  NAREG, RLEFT,
  "          l    A1,AR   divd2n1\n          dd  AL,0(,A1)     divd2n2\n",

ASG PLUS, INAREG,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SCON , TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  0, RLEFT,
  "          a   AL,AR     add2c\n",

ASG PLUS, INAREG,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SAREG , TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  0, RLEFT,
  "          ar  AL,AR     add2r\n",

ASG PLUS, INAREG,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SNAME , TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  NAREG, RLEFT,
  "          l    A1,AR   add2n1\n          a   AL,0(,A1)   add2n2\n",

ASG MINUS, INAREG|FORCC,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SONE , TANY,
  0, RLEFT|RESCC,
  "          bctr   AL,0   sub0\n",

ASG MINUS, INAREG|FORCC,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SOREG | SCON | SNAME, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  0, RLEFT|RESCC,
  "          s   AL,AR   sub1\n",

ASG MINUS, INAREG|FORCC,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  0, RLEFT|RESCC,
  "          sr   AL,AR   sub1a\n",

ASG MINUS, INAREG|FORCC,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SICON, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  0, RLEFT|RESCC,
  "          s    AL,AR   sub1b\n",

ASG MOD, INAREG,
 STAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SCON | SNAME | SOREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  0, RLEFT,
  "   slr   0,0  mod1\n   lr   1,AL\n   d    0,AR\n   lr   AL,0\n",

ASG MOD, INAREG,
 STAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SAREG|STAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  0, RLEFT,
  "   slr   0,0  mod1a\n   lr   1,AL\n   dr   0,AR\n   lr   AL,0\n",

ASG DIV, INAREG,
 STAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SCON | SNAME | SOREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  0, RLEFT,
  "   slr   0,0  div1\n   lr   1,AL\n   d    0,AR\n   lr   AL,1\n",

ASG DIV, INAREG,
 STAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SAREG | STAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  0, RLEFT,
  "   slr   0,0  div1\n   lr   1,AL\n   dr   0,AR\n   lr   AL,1\n",

ASG DIV, INAREG,
 STAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 STARNM, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  NAREG, RLEFT,
  "   slr   0,0  div1s\n   lr   1,AL\n   l    A1,AR\n   d    0,0(,A1)\n   lr   AL,1\n",

ASG OR,  INAREG|FORCC,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  0, RLEFT|RESCC,
  "          or   AL,AR   or1\n",

ASG OR,  INAREG|INTAREG|FORCC,
 SAREG, TANY,
 SOREG, TSHORT|TUSHORT,
  NAREG, RLEFT|RESCC,
  "          lh   A1,ZHAR   or1os1\n          or   AL,A1   or1os2\n",

ASG OR,  INAREG|FORCC,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SOREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  0, RLEFT|RESCC,
  "          o    AL,AR   or1o\n",

ASG OR,  INAREG|FORCC,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SICON, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  0, RLEFT|RESCC,
  "          o    AL,AR   or2\n",

ASG OR,  INAREG|FORCC,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SNAME, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  NAREG, RLEFT|RESCC,
  "   l   A1,AR   or2n\n  o    AL,0(,A1)   or2nb\n",

ASG AND, INAREG|FORCC,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SOREG | SCON, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  0, RLEFT|RESCC,
  "          n    AL,AR   and2\n",

ASG AND, INAREG|FOREFF,
 SOREG, TANY,
 SAREG, TANY,
  NAREG, RESC1,
  "          l    A1,AL   and2o1\n          nr   A1,AR   and2o2\n          st   A1,AL   and2o3\n",

ASG AND, INAREG|FORCC,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  0, RLEFT|RESCC,
  "          nr   AL,AR   and3\n",

ASG ER, INAREG|FORCC,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SOREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  0, RLEFT|RESCC,
  "          x    AL,AR   xor4\n",

ASG ER, FOREFF,
 SOREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  NAREG, RESC1,
  "  l  A1,AL  xor5\n  xr  A1,AR   xor5a\n  st  A1,AL  xor5b\n",

ASG ER, INAREG | FOREFF,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  0, RLEFT,
  "    xr  AL,AR   xor6\n",

ASG AND, INAREG | FOREFF,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  0, RLEFT,
  "    nr  AL,AR   and6\n",

ASG AND, INAREG|FORCC,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SICON, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  0, RLEFT|RESCC,
  "          n    AL,AR   and4\n",

ASG LS,  INAREG,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SCON, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  0, RLEFT,
  "          sll   AL,ZG   sll1\n",

ASG LS,  INAREG,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SNAME, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  NAREG, RLEFT,
  " l A1,AR\n l A1,0(,A1)\n n A1,=xl4'0000003f'\n sll AL,1\n bct A1,*-4   sll1a fixme_sh\n",

ASG LS,  INAREG,
 SAREG, TANY,
 SAREG, TANY,
  NAREG, RLEFT,
  " lr A1,AR\n n A1,=xl4'0000003f'\n sll AL,1\n bct A1,*-4   sll2 fixme_sh\n",

ASG LS,  INAREG,
 SAREG, TANY,
 SOREG, TANY,
  NAREG, RLEFT,
  " l A1,AR\n n A1,=xl4'0000003f'\n sll AL,1\n bct A1,*-4   sll3 fixme_sh\n",

ASG RS,  INAREG,
 SAREG, TINT|TUNSIGNED|TPOINT|TCHAR|TUCHAR|TLONG|TULONG,
 SCON, TANY,
  0, RLEFT,
  "          srl   AL,ZG    srl1\n",

ASG RS,  INAREG,
 SAREG, TANY,
 SAREG, TANY,
  NAREG, RLEFT,
  " lr A1,AR\n n A1,=xl4'0000003f'\n ltr A1,A1\n bz *+12\n srl AL,1\n bct A1,*-4   srl2 fixme_sh\n",

ASG RS,  INAREG,
 SAREG, TANY,
 SOREG, TANY,
  NAREG, RLEFT,
  " l A1,AR\n n A1,=xl4'0000003f'\n ltr A1,A1\n bz *+12\n srl AL,1\n bct A1,*-4   srl3 fixme_sh\n",

ASG RS,  INAREG,
 SAREG, TANY,
 SNAME, TANY,
  NAREG, RLEFT,
  " l A1,AR\n l A1,0(,A1)\n n A1,=xl4'0000003f'\n srl AL,1\n bct A1,*-4   srl4 fixme_sh\n",

LS,  INAREG,
 SAREG, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
 SCON, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  NAREG, RESC1,
  "          lr   A1,AL   sll1 ls0\n          sll   A1,ZG   sll1 ls\n",

UNARY CALL, INTAREG,
 SNAME|SOREG|SCON, TANY,
 SANY, TINT|TUNSIGNED|TPOINT|TCHAR|TUCHAR|TLONG|TULONG,
  NAREG, RESC1, /* should be register 0 */
  "          l     15,AL    jsr1\n          balr  14,15\n",

UNARY CALL, INTAREG,
 SAREG, TANY,
 SANY, TINT|TUNSIGNED|TPOINT|TCHAR|TUCHAR|TLONG|TULONG,
  NAREG, RESC1, /* should be register 0 */
  "          lr    15,AL    jsr1r\n          balr  14,15\n",

UNARY CALL, INTBREG,
 SANY, TANY,
 SANY, TANY,
  NBREG, RESC1,
  "          l     15,AL    jsrd1\n          balr  14,15   fixme\n",

SCONV,  INAREG|INTAREG|FOREFF,
 SOREG, TINT|TUNSIGNED,
 SAREG,   TLONG|TULONG,
         0,      RESC1,
         "          l    AR,AL    sconv1\n",

SCONV,  INAREG|INTAREG|FOREFF,
 SAREG, TINT|TUNSIGNED,
 SAREG,   TLONG|TULONG,
         0,      RESC1,
         "          lr   AR,AL    sconv1r\n",

SCONV,  INTAREG,
 STAREG, TLONG,
 SANY,   TINT,
         0,      RLEFT,
         "*             AL        sconv2\n",

SCONV,  INBREG|INTBREG,
 SANY, TINT|TUNSIGNED|TLONG|TULONG,
 SANY,   TDOUBLE,
         NBREG,      RESC1,
         "*             A1        sconv3\n",

SCONV,  INAREG|INTAREG,
 SAREG|STAREG, TLONG|TULONG,
 SANY,   TCHAR|TUCHAR,
         NAREG,      RESC1,
         "          lr    A1,AL     sconv4\n",

SCONV,  INAREG|INTAREG,
 SANY,   TDOUBLE,
 SANY, TINT|TUNSIGNED|TLONG|TULONG,
         NAREG,      RESC1,
         "*             A1        sconv5\n",

STASG,  FOREFF,
        SNAME,    TANY,
        SAREG,     TPOINT,
                NAREG,      RNOP,
                "ZS",

STASG,  FOREFF,
        SOREG,    TANY,
        SCON|SAREG,     TANY,
                NAREG,      RNOP,
                "ZS",

INIT, FOREFF,
 SCON, TANY,
 SANY, TINT|TUNSIGNED|TPOINT|TLONG|TULONG,
  0, RNOP,
  "ZK",

 /* Default actions for hard trees ... */

# define DF(x) FORREW,SANY,TANY,SANY,TANY,REWRITE,x,""

UNARY MUL, DF( UNARY MUL ),

INCR, DF(INCR),

DECR, DF(INCR),

ASSIGN, DF(ASSIGN),

STASG, DF(STASG),

OPLEAF, DF(NAME),

OPLOG, FORCC,
 SANY, TANY,
 SANY, TANY,
  REWRITE, BITYPE,
  "",

OPLOG, DF(NOT),

COMOP, DF(COMOP),

INIT, DF(INIT),

OPUNARY, DF(UNARY MINUS),


ASG OPANY, DF(ASG PLUS),

OPANY, DF(BITYPE),

FREE, FREE, FREE, FREE, FREE, FREE, FREE, FREE, "help; I'm in trouble\n" };
